!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.RactiveMultiselect=t():e.RactiveMultiselect=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){function n(e){e=e||s.event,e.preventDefault&&e.preventDefault(),e.returnValue=!1}function i(e){return a[e.keyCode]?(n(e),!1):void 0}function o(){s.addEventListener("DOMMouseScroll",n,!1),s.addEventListener("wheel",n),s.addEventListener("mousewheel",n),c.addEventListener("mousewheel",n),s.addEventListener("touchmove",n),c.addEventListener("keydown",i)}function l(){s.removeEventListener("DOMMouseScroll",n,!1),s.removeEventListener("wheel",n),s.removeEventListener("mousewheel",n),c.removeEventListener("mousewheel",n),s.removeEventListener("touchmove",n),c.removeEventListener("keydown",i)}r(1);var a=r(5),s=window,c=document,d="ractive-multiselect-dropdown-container";e.exports=Ractive.extend({template:r(6),isolated:!0,data:function(){return{selected:[],blockScrolling:!0,clearFilterOnSelect:!0,autoClose:!1,consume:!0,highlighted:-1,highlightedSelected:-1,open:!1,showCross:!0,allowCustom:!0}},events:{escape:a.escape,enter:a.enter,uparrow:a.uparrow,downarrow:a.downarrow,leftarrow:a.leftarrow,rightarrow:a.rightarrow,backspace:a.backspace,"delete":a["delete"]},computed:{items:function(){var e=this,t=e.get("filter").toLowerCase(),r=e.get("data"),n=e.get("selected"),i=e.get("consume");return r?r.filter(function(e){if(!(i&&n.indexOf(e)>-1)){if("object"!=typeof e)return e.toLowerCase().indexOf(t)>-1;for(var r in e)if(e[r].toLowerCase().indexOf(t)>-1)return!0}}):r}},partials:{selectedItem_default:r(7),_selectedItem:function(){return this.partials.selectedItem?this.partials.selectedItem:this.partials.selectedItem_default},item_default:r(8),_item:function(){return this.partials.item?this.partials.item:this.partials.item_default}},onrender:function(){var e=this,t=e.find(".dropdown");e.dropdown=t;var r=c.getElementById(d);r||(r=c.createElement("div"),r.id=d,r.className="ractive-multiselect",c.body.appendChild(r)),r.appendChild(t)},oncomplete:function(){var e=this,t=e.find("*"),r=e.find(".dropdown");e.clickHandler=function(n){var i=n.target;t.contains(i)||i===r||r.contains(i)||e.set("open",!1)},e.observe("open",function(t){var r=e.get("blockScrolling");t?(c.addEventListener("click",e.clickHandler),r&&o()):(c.removeEventListener("click",e.clickHandler),r&&l()),e.updateSize(),e.updatePosition()}),e.on("uparrow downarrow leftarrow rightarrow enter delete",function(t){var r=e.get("open"),n=t.name,i=t.original,o=e.get("highlighted"),l=e.get("highlightedSelected"),a=e.get("items"),s=e.get("selected"),c=e.get("filter");if("uparrow"==n){if(0>=o)return;o=Math.max(0,o-1),e.set("highlighted",o)}else"downarrow"==n&&(o=Math.min(a.length,o+1),e.set("highlighted",o));if("leftarrow"==n){if(0===l)return;l=-1===l?s.length-1:Math.max(0,l-1),e.set("highlightedSelected",l)}if("rightarrow"==n)l=Math.min(s.length,l+1),e.set("highlightedSelected",l);else if("enter"==n)-1!==o?r&&(e.select(e.get("items."+o)),e.set("highlighted",-1)):c.length>1&&e.select(c);else if("delete"==n){var c=e.get("filter");-1!==l?(e.select(e.get("selected."+l)),e.set("highlightedSelected",-1),i.preventDefault()):""===c&&e.set("highlightedSelected",s.length-1)}})},onteardown:function(){c.removeEventListener("click",this.clickHandler);var e=this.find(".dropdown");e&&e.parentNode.removeChild(e);var t=c.getElementById(d);t&&0==t.childNodes.length&&t.parentNode.removeChild(t)},open:function(e){this.set("open",!0)},close:function(e){this.set("open",!1)},select:function(e){if(e){var t=this;e.keypath&&(e=t.get(e.keypath));var r=t.get("selected"),n=(t.get("items"),r.indexOf(e));-1==n?t.push("selected",e):t.splice("selected",n,1),t.get("clearFilterOnSelect")&&t.set("filter",""),t.get("autoClose")&&t.close(),t.update("items"),t.updateSize(),t.updatePosition()}},updateSize:function(){var e=this,t=e.find("*");e.dropdown.style.width=t.offsetWidth+"px"},updatePosition:function(){var e=this,t=e.find("*"),r=t.getBoundingClientRect(),n=e.get("open"),i=e.dropdown;n?(i.style.left=r.left+"px",i.style.top=r.bottom+3+"px"):i.style.left="-9999px"}});var a={37:1,38:1,39:1,40:1}},function(e,t,r){var n=r(2);"string"==typeof n&&(n=[[e.id,n,""]]);r(4)(n,{});n.locals&&(e.exports=n.locals)},function(e,t,r){t=e.exports=r(3)(),t.push([e.id,".ractive-multiselect{display:flex;display:inline-flex;flex-wrap:wrap;cursor:default;user-multiselect:none;line-height:1;padding:.2em;background:#fff;border:1px solid #999}.ractive-multiselect,.ractive-multiselect *,.ractive-multiselect :after,.ractive-multiselect :before{box-sizing:border-box}.ractive-multiselect label{margin-right:.5em}.ractive-multiselect .item{display:inline-block;margin:.2em;background:#f0f0f0;font-size:.8em;padding:.3em .6em;border-radius:99px}.ractive-multiselect .item .cross{width:8px;height:8px;vertical-align:middle;margin-left:4px;cursor:pointer}.ractive-multiselect .item.selecting{border:1px solid #0a63c2}.ractive-multiselect input{flex:1 1 auto;background:none;border:none;box-shadow:none;outline:none}.ractive-multiselect .dropdown{margin:2px 0 0;background:#fff;color:#333;border-radius:3px;padding:2px 0;cursor:default;list-style:none;z-index:50;box-shadow:0 3px 9px rgba(0,0,0,.4)}.ractive-multiselect .dropdown:not(.open){display:none}.ractive-multiselect li{padding:.3em .5em .3em 1.5em;border-top:1px solid transparent;border-bottom:1px solid transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ractive-multiselect li.selected{color:#3d96f5}.ractive-multiselect li.selecting,.ractive-multiselect li:hover{background:linear-gradient(#3d96f5,#0d7cf2);color:#fff;border-top-color:#0a63c2;border-bottom-color:#004a99}#ractive-multiselect-dropdown-container .dropdown{position:fixed;left:-9999px}",""])},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var r=this[t];r[2]?e.push("@media "+r[2]+"{"+r[1]+"}"):e.push(r[1])}return e.join("")},e.i=function(t,r){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(n[o]=!0)}for(i=0;i<t.length;i++){var l=t[i];"number"==typeof l[0]&&n[l[0]]||(r&&!l[2]?l[2]=r:r&&(l[2]="("+l[2]+") and ("+r+")"),e.push(l))}},e}},function(e,t,r){function n(e,t){for(var r=0;r<e.length;r++){var n=e[r],i=u[n.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](n.parts[o]);for(;o<n.parts.length;o++)i.parts.push(a(n.parts[o],t))}else{for(var l=[],o=0;o<n.parts.length;o++)l.push(a(n.parts[o],t));u[n.id]={id:n.id,refs:1,parts:l}}}}function i(e){for(var t=[],r={},n=0;n<e.length;n++){var i=e[n],o=i[0],l=i[1],a=i[2],s=i[3],c={css:l,media:a,sourceMap:s};r[o]?r[o].parts.push(c):t.push(r[o]={id:o,parts:[c]})}return t}function o(){var e=document.createElement("style"),t=h();return e.type="text/css",t.appendChild(e),e}function l(){var e=document.createElement("link"),t=h();return e.rel="stylesheet",t.appendChild(e),e}function a(e,t){var r,n,i;if(t.singleton){var a=m++;r=v||(v=o()),n=s.bind(null,r,a,!1),i=s.bind(null,r,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=l(),n=d.bind(null,r),i=function(){r.parentNode.removeChild(r),r.href&&URL.revokeObjectURL(r.href)}):(r=o(),n=c.bind(null,r),i=function(){r.parentNode.removeChild(r)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else i()}}function s(e,t,r,n){var i=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=g(t,i);else{var o=document.createTextNode(i),l=e.childNodes;l[t]&&e.removeChild(l[t]),l.length?e.insertBefore(o,l[t]):e.appendChild(o)}}function c(e,t){var r=t.css,n=t.media;t.sourceMap;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}function d(e,t){var r=t.css,n=(t.media,t.sourceMap);n&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");var i=new Blob([r],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(i),o&&URL.revokeObjectURL(o)}var u={},f=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},p=f(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),h=f(function(){return document.head||document.getElementsByTagName("head")[0]}),v=null,m=0;e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=p());var r=i(e);return n(r,t),function(e){for(var o=[],l=0;l<r.length;l++){var a=r[l],s=u[a.id];s.refs--,o.push(s)}if(e){var c=i(e);n(c,t)}for(var l=0;l<o.length;l++){var s=o[l];if(0===s.refs){for(var d=0;d<s.parts.length;d++)s.parts[d]();delete u[s.id]}}}};var g=function(){var e=[];return function(t,r){return e[t]=r,e.filter(Boolean).join("\n")}}()},function(e,t){function r(e){return function(t,r){function n(n){var i=n.which||n.keyCode;i===e&&r({node:t,original:n})}return t.addEventListener("keydown",n,!1),{teardown:function(){t.removeEventListener("keydown",n,!1)}}}}e.exports={enter:r(13),tab:r(9),escape:r(27),space:r(32),leftarrow:r(37),rightarrow:r(39),downarrow:r(40),uparrow:r(38),backspace:r(8),"delete":r(46)}},function(e,t){e.exports={v:3,t:[{t:7,e:"div",a:{"class":["ractive-multiselect ",{t:2,r:"class"}],style:[{t:2,r:"style"}]},f:[{t:4,f:[{t:7,e:"span",a:{"class":["item ",{t:4,f:["selecting"],n:50,x:{r:["~/highlightedSelected","@index"],s:"_0==_1"}}]},f:[{t:8,r:"_selectedItem"}," ",{t:4,f:[{t:7,e:"svg",a:{"class":"cross",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 12"},v:{click:{m:"select",a:{r:["."],s:"[_0]"}}},f:[{t:7,e:"path",a:{d:"M8.432 6l3.442-3.442a.433.433 0 0 0 0-.61L10.05.126a.43.43 0 0 0-.607 0L6 3.568 2.557.125a.432.432 0 0 0-.608 0L.124 1.95a.433.433 0 0 0 0 .608L3.568 6 .126 9.442a.432.432 0 0 0 0 .608l1.824 1.825c.167.166.44.166.608 0L6 8.432l3.442 3.443c.167.166.44.166.608 0l1.824-1.825a.432.432 0 0 0 0-.608L8.432 6z"}}]}],n:50,r:"showCross"}]}],n:52,r:"selected"}," ",{t:7,e:"input",a:{type:"text",value:[{t:2,r:".filter"}],placeholder:[{t:2,x:{r:["placeholder"],s:'_0||"Select an item..."'}}]},v:{focus:{m:"open",a:{r:[],s:"[]"}},uparrow:"uparrow",downarrow:"downarrow",leftarrow:"leftarrow",rightarrow:"rightarrow",enter:"enter","backspace-delete":"delete"}}," ",{t:7,e:"ul",a:{"class":["dropdown",{t:4,f:[" open"],n:50,x:{r:["items","items.length","open"],s:"_0&&_1&&_2"}}," ",{t:2,r:"class"}]},f:[{t:4,f:[{t:7,e:"li",a:{"class":[{t:4,f:["selecting"],n:50,x:{r:["~/highlighted","@index"],s:"_0==_1"}}," ",{t:4,f:["selected"],n:50,x:{r:["~/selected","."],s:"_0.indexOf(_1)>-1"}}]},v:{click:{m:"select",a:{r:["event"],s:"[_0]"}}},f:[{t:8,r:"_item"}]}],n:52,r:"items"}]}]}]}},function(e,t){e.exports={v:3,t:[{t:2,r:"."}]}},function(e,t){e.exports={v:3,t:[{t:2,r:"."}]}}])});